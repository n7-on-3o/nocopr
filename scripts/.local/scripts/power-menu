#!/bin/bash

# Define the options with Nerd Font icons and Kanji
# 󰐥 電源オフ (Power Off)
# 󰜉 再起動 (Reboot)
# 󰤄 スリープ (Suspend)
# 󰗼 ログアウト (Logout)
# 󰌾 ロック (Lock)


FLOCK="$XDG_RUNTIME_DIR/fuzzel-$WAYLAND_DISPLAY.lock"

if pgrep -f fuzzel.*power-menu >/dev/null; then 
    exit 0
fi

if [ -f $FLOCK ]; then
    killall fuzzel
    rm $FLOCK
fi

SELECTION=$(echo -e "󰐥 Poweroff\n󰜉 Reboot\n󰤄 Suspend\n󰗼 Logout\n󰌾 Lock" | \
    fuzzel --namespace power-menu \
           --dmenu \
           --lines 5 \
           --width 15 \
           --tabs 4 \
           --placeholder "さよなら..." \
           --prompt "󰐥 ")

case "$SELECTION" in
    *"Poweroff")
        systemctl poweroff
        ;;
    *"Reboot")
        systemctl reboot
        ;;
    *"Suspend")
        systemctl suspend
        ;;
    *"Logout")
        niri msg action quit
        ;;
    *"Lock")
        niri-lock
        ;;
esac
